# Chapter 1 Getting started with Odoo using developer mode 15

Odoo provides a rapid application development framework, especially suitable for building business applications. Such applications are usually used to keep business records and workflows. Odoo not only simplifies the construction of such applications, but also provides rich components such as dashboards, calendars, charts, etc., for creating irresistible user interfaces.

In this chapter, we will dive right into the action and explore the internals of Odoo by coding through the web interface, without even having to set up a local development environment. This will give us an intuitive feel for the components involved in an Odoo application. At the same time, we will also learn some basic tools for viewing existing applications and quickly building prototypes.

The main contents of this article are:

- to-do (task list) app
- Understand the basic structure of Odoo
- Using Odoo SaaS testing library
- Install Odoo on your server
- Activate developer mode
- Add custom fields to models
- New Model
- Create menu items and actions
- Configure access control permissions
- Create a view

After studying this chapter, the reader will be familiar with the main components of Odoo customization and development.

## Technical Preparation

At a minimum, you need a modern browser such as Firefox or Chrome to complete this chapter. If you have a browser and an internet connection, you can follow this chapter using the Odoo SaaS test library without having to install it locally.

Of course, you can also use a locally installed Odoo instance. See the section Installing Odoo on a Server for instructions on installing pre-packaged versions on Windows, Ubuntu, and Red Hat Enterprise Linux (RHEL). Alternatively, you can use Docker for installation.

## Import the to-do list application

In this chapter we will use a sample project to demonstrate the concepts we are explaining. This project is a simple to-do list Odoo application.

With this app, we can add a list and then mark it as completed. For example, we can add *Buy eggs* to the project, and then check *Completed* after the purchase. And the To-do list should only be visible to the user himself, so the current user can only get his own to-do list. To make it more interesting, we added some complex functions to allow the to-do list to contain a group of users related to the task, that is, a work group.

For this application we should consider the following layers:

- Data layer: implemented through models
- Business logic layer: implemented through Python automated coding
- Presentation layer: implemented through views

For the data layer, we need a To-do list model, and we will also use the built-in Contact (also called Partner) model to support workgroup functionality. Of course, remember to configure access permissions in the new model.

In the business logic layer, we use the framework to handle basic operations such as CRUD. In this example, we do not need to use additional automation support. We need to use Python code in the developer module to use the automation function. We do not need to use it in the development template for now, but we can use the Automated Actions tool under the Technical menu to implement this business logic through the UI interface. It will be used in the examples later in this chapter.

Finally, in the presentation layer, we will add menu items to the application and views for the to-do model. The basic views of a business application are the list view for viewing existing records and the form view for drilling down to record details. To enhance usability, we can also pre-set filter items in the search box of the list view. The search option is implemented using the search view component.

Here are the steps to create a to-do list app:

1. Create a new to-do list model
1. Create the menu item and make it visible to the user
1. Configure access control permissions
1. Create list and form views for the to-do list

The new to-do list model contains the following fields:

- - Description: Character type
    - Is Done? flag: Boolean

The specific features of the application include team functionality: you can add a group of users who perform the same task. Therefore, you need a model to represent users. Odoo comes with a Contact model (technical name is res.partner), which can be used to store individuals, companies and addresses.

The To-Do List model should contain a Work Team field that can be used to select a group of users. We want only specified people to be selected to join the work team. Therefore we need to modify the Contact model to add the Is Work Team? flag. Only users with this flag can be added to the work team.

To implement the work team functionality, we need to add a field to the Contact model and the form view. Before jumping into the implementation, let's discuss some features related to the Odoo framework and then learn how to prepare the environment to use.

## Understand the basic concepts of Odoo

For a beginner in Odoo, some concepts may not be so clear at first glance. Let's master them before learning.

### About Odoo and Odoo Community

Odoo is a software product released by Odoo SA, a company founded by Fabien in Belgium. Odoo software products are company-led, which means that the roadmap and development are tightly controlled by Odoo SA. But at the same time, it follows the open source regulations and welcomes community contributions.

Odoo software adopts an open source core business model, which means that part of the code is open source and part is proprietary. Based on this model, Odoo has released two versions.

The community edition (CE) is open to the public and open source, using the LGPL open source certificate.

The Enterprise Edition (EE) is only open to official partners and customers with proprietary certificates and uses closed source code.

Odoo EE is a set of modules on top of the Odoo CE kernel, providing some advanced features that can entice users to upgrade. The revenue from Odoo EE provides funding for the development of Odoo CE and Odoo EE. Odoo founder and CEO Fabien Pinckaers has repeatedly promised to put 80% of the code in the community version as open source, and the other 20% in its own enterprise version.

The greatest resource of any open source project is the community around it. Odoo has many active open source contributors. For the Odoo product, the community contributes feature feedback, translations, security issue reports, bug fixes and occasionally technical improvements to the core product. Odoo CE is available at <https://github.com/odoo/odoo>.

In addition to Odoo's core products, the community also releases some new functional modules. Many individuals and companies in the Odoo community open their Git repositories to the public with open source certificates. They also publish applications on Odoo's official store [Odoo Apps](https://apps.odoo.com/). Free and paid modules can be published in the app store.

These community modules are not added to the core Odoo project, so they are developed in a decentralized manner without common standards and quality control. The Odoo Community Alliance (OCA) was established to solve this problem. It incorporates these community contributed modules and provides common code standards, guidelines, quality control and workflow tools. The OCA code repository is located at <https://github.com/OCA>, and these released modules can be viewed at <https://odoo-community.org/shop>.

### Odoo product versions

At the time of writing this book, the latest stable version of Odoo is Odoo 15, available as branch 15.0 on GitHub. This is the version used throughout the book. Major versions of Odoo are released annually, at the Odoo Experience Conference in October each year.

The latest three stable versions are officially supported. After version 15 is released, versions 13 and 14 are still supported, but version 12 is no longer officially supported. This means that no more bugs or security issues will be fixed.

Databases are not compatible between major versions of Odoo. If you run an Odoo 15 server with data created in a previous major version, it will not work. Using an old database with a newer Odoo version requires a laborious migration.

The same is true for plugin modules. Usually an Odoo plugin developed in one major version will not work in another major version. When downloading community modules online, please pay attention to whether they are supported in the Odoo version you are using.

Major version releases (such as 15.0) usually have more frequent upgrades, which are mostly bug fixes rather than new feature development. These upgrades ensure that the API is stable, that is, the model data structure and view element identifiers remain stable. This is important because it will not cause custom modules to break due to incompatible changes made by upstream kernel modules.

Odoo Online SaaS versions may use intermediate versions, sometimes called SaaS versions. They are also officially supported. The current list of supported versions can be found at <https://www.odoo.com/documentation/user>, in the Practical Information section of the Support page.

The version in the master branch will form the next major version update, but its API is not stable before release, and you should not use it to build custom modules. It would be like walking in quicksand, you don't know when a change will break your custom module. Please take this warning.

### Odoo Architecture

It is helpful to understand that Odoo follows a multi-layered architecture and the role of each component we use. So let's learn the architecture of an Odoo application and help us develop the application by deconstructing it into multiple component layers.

Odoo applications can be deconstructed into three layers: data layer, logic layer and presentation layer:

[![Figure 1.1: Odoo application layering](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f5f5fed41c3425280d3a7faa8b25d3a~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022516072350.jpg)

Figure 1.1: Odoo application layering

The data layer is the bottom layer responsible for data storage and persistence. Odoo uses the PostgreSQL server to achieve this. Odoo only supports PostgreSQL databases for design reasons. Binary files such as document attachments and images are usually stored in a file system called filestore (directory).

> **Tip:** This means that a complete backup of your Odoo instance will include both the database export and a copy of the filestore.

We rarely use SQL to interact directly with the database engine, but it may be necessary in certain scenarios.

Odoo relies on Object Relational Mapping (ORM) as the interface between the application and the database. ORM provides an application programming interface (API) for plugin modules to interact with the data. We use ORM models to implement the data layer. For example, a Partner data entity for customer or supplier data is represented by a model.

Usually the underlying database should only be accessed by this layer, as it ensures security permission control and data consistency. The ORM model is based on Python object classes that support multiple interaction methods, such as basic operations of CRUD. Specifically, CRUD operations are implemented through the **create()**, **search()**, **write()**, and **unlink()** model methods.

The logic layer is responsible for all interactions with the data layer and is handled by the Odoo server. CRUD operations can be extended to implement specific business logic. For example, the create() and write() methods can implement default values ​​or other automatic operations. Other methods can be added to enforce validation rules or automatically calculate field values.

The presentation layer is used to display data and interact with users. It is implemented through the client side of the software and is responsible for user interaction. The client software uses remote procedure calls (RPC) to run the ORM engine and the Odoo service of the business logic. ORM API calls are sent to the Odoo server to handle reading, writing, verification or performing other operations. The results are then returned to the client for further processing.

Odoo comes with a web client. The web client supports all the functions required by business applications, such as login sessions, navigation menus, data lists and forms.

There is a website framework for external development frontend. It provides some CMS features and can be used to create static and dynamic web pages. The website framework uses **controller** components to implement the code of specific display logic, separated from the internal logic of the model. The page uses **QWeb** as its rendering engine. Those are some special XML QWeb tags that contain HTML tags plus loops, conditions or calls to other templates.

The Odoo server API is very open and includes all server-side functionality. The official web client uses an API that is no different from the API of other applications. Therefore, other client implementations are possible and can be implemented on any platform using any programming language. Desktop and mobile applications can be created to provide different user interfaces, taking advantage of Odoo's data and logic layer for business logic and data persistence.

## Using the Odoo SaaS trial database

The easiest way to use Odoo is to use Odoo's Software as a Service (SaaS) trial database. This does not require any installation, just go to the official website <https://odoo.com>/ and click the Try it free button.

You will be asked to select an application to install in the new database. For the purposes of this chapter, you can choose any application, and you are free to choose. If you are really undecided, you can use the CRM application.

[![Figure 1.2 – Initial application selection for the Odoo SaaS trial database](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8c24376d5f064d5790a5bccb7e3ba973~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/202202260110377.jpg)

Figure 1.2 – Initial application selection for the Odoo SaaS trial database

The new SaaS database uses the latest Odoo SaaS version, which is based on the latest stable version of Odoo EE, with its own minor version number, so it is not consistent with the latest stable version of Odoo Enterprise.

The free database is valid for 15 days. At the time of writing this book, the Odoo SaaS version also offers a free plan that allows you to continue using it after the expiration date (requires installing more than one application).

## Install Odoo on your workstation

Using the Odoo SaaS test library is the default option for this chapter. In the following chapters of this book, we will use a local Odoo installation. In [Chapter 2 Odoo 15 Development Development Environment Preparation](https://alanhou.org/odoo15-development-environment/), corresponding guidance will be provided.

It is worth mentioning that Odoo also has some pre-packaged installation packages. We briefly explain them here for readers to understand:

- Install Odoo on your operating system using the pre-packaged installer: This is a good option if you are new to Odoo and want to quickly get a local environment. Pre-packaged installers are available for the following operating systems: **Windows** (EXE installer); **Debian**/**Ubuntu** (DEB packages) and **CentOS**/**RHEL** (RPM packages).
- Install Odoo using Docker container: This is a good option if you have used Docker and installed it in your operating system. If you don’t know much about Docker, you can use the previous method to avoid affecting your main course (learning Odoo development) by learning Docker.

These packages are available for download at <https://download.odoo.com>. They contain all stable versions of Odoo, as well as the master branch corresponding to the latest development version. We will explain these options in the following sections.

For more information about installing Odoo, see the official documentation.

### Install on Windows using the one-click installer

Odoo provides a one-click installer for Windows that contains everything you need to run Odoo: a Python 3 runtime, a PostgreSQL database, and the Odoo server with dependencies installed.

You can download the installation package from <https://download.odoo.com>. On the homepage, select the corresponding version: 15 (stable) - Community Edition. The daily build package is located at 15.0/nightly/windows, and the latest package is at the bottom of the page.

The installation package is very easy to use. At the end of the installation Odoo will start automatically.

A Windows service will also be created to automatically start Odoo and PostgreSQL. Please note this when installing via other methods such as source code. After the Windows installation package is installed, it will occupy port 8069, so other installations cannot use this port.

### Installing on Linux using pre-packaged installation packages

The Odoo download site ([https://download.odoo.com](https://download.odoo.com/)) also provides official package download repositories for Debian (including Ubuntu) and RHEL/CentOS.

On the homepage there is an installation guide for the corresponding system installation package (**apt** or **yum**). Please make sure to modify the Odoo version in the command line examples to the corresponding version, such as **15.0**.

```
# Debian
wget -O - https://nightly.odoo.com/odoo.key | apt-key add -
echo "deb http://nightly.odoo.com/15.0/nightly/deb/ ./" >> /etc/apt/sources.list
apt-get update && apt-get install odoo
# RHEL/CentOS
yum-config-manager --add-repo=https://nightly.odoo.com/15.0/nightly/rpm/odoo.repo
yum update && yum install odoo
```

Before installing Odoo 15 on Linux, you should have the PostgreSQL database installed so that Odoo can create and configure its users.

### Installing Odoo using Docker container

Docker provides a convenient multi-platform solution for running applications. It can be used to run applications on Windows, Linux, and **macOS**. Compared with traditional virtual machine container technology, it is simple to use and has high resource utilization.

First, you need to install Docker in your operating system. **Docker Desktop** is a community version and is free to use. It can be downloaded from <https://www.docker.com>. It is best to refer to this website when installing the latest version of Docker. Docker relies on virtual hardware technology, so make sure this feature is enabled in the basic input and output system (**BIOS**).

General instructions for installing and running Docker can be found at <https://docs.docker.com/engine/install>.

For example, for Ubuntu, detailed installation instructions are located at <https://docs.docker.com/engine/install/ubuntu/>.

For important post-installation steps, such as running Docker as a non-root user, see <https://docs.docker.com/engine/install/linux-postinstall/>.

Docker Desktop for Windows requires **Hyper-V**, which is only available in **Windows** **10** Enterprise and Education editions. See <https://docs.docker.com/desktop/windows/install/> for the latest installation details.

Docker Desktop on Mac requires macOS 10.14 or later. See <https://docs.docker.com/desktop/mac/install/> for the latest details.

**Note:** Docker Toolbox was once available as an alternative for Windows and macOS, but this distribution has been deprecated. Docker Toolbox packages **VirtualBox** and provides a preconfigured shell for working with Docker containers from the command line. See <https://docs.docker.com/toolbox/> for more details.

The official Docker image of Odoo on **Docker Hub** is located at <https://hub.docker.com/_/odoo>. Here we can see the basic guide to using the Odoo Docker image. When running Odoo, two Docker containers are created: one for the PostgreSQL database and the other for the Odoo server.

Installation and operation are all done through the command line. Start the PostgreSQL Docker container with the following command:

```
$ docker run -d -e POSTGRES_USER=odoo -e POSTGRES_PASSWORD=odoo -e POSTGRES_DB=postgres --name db postgres:13
```

This will download the latest PostgreSQL image from the Internet and start a container that runs as a background task.

Next, install and run the Odoo server container, connect to the PostgreSQL container that was just started, and expose port **8069** to the outside world:

```
$ docker run -t -p 8069:8069 --name odoo --link db:db odoo:15.0 -d odoo15
```

You can now see the real-time Odoo server log in the terminal window and open the Odoo instance by visiting http://localhost:8069 in your browser.

**Note:** If port 8069 is occupied, the Odoo service startup will fail. For example, the port may be occupied by the running Odoo server. At this time, we need to find the service that stops occupying the port (for example, find the list of running services) or use the -p parameter to specify another port to run Odoo. For example, change it to port 8070 (-p 8070:8069). You can also use the ` -d <dbname> ` parameter to change the database name required by the instance.

The following basic Docker commands will help you manage containers:

- `docker stop <name>`: Stop the container
- `docker start <name>`: Start a container
- `docker start -a <name>`: starts a container with output, such as server logs in the command terminal
- `docker attach <name>`: re-add container output to the current terminal window
- `docker ps`: List current Docker containers

The above are the basic commands for operating Docker containers.

If there is a problem running the container, you can run the following command to start over:

```
$ docker container stop db
$ docker container rm db
$ docker container stop odoo
$ docker container rm odoo
```

Docker technology is widely used and fun to learn. There is good documentation on the Docker website, and you can start by going to <https://www.docker.com/get-started>.

## Enable developer tools

To implement our project, we need to use Odoo developer tools. These tools can be used by turning on the developer mode.

Developer mode is useful for viewing and modifying the current Odoo configuration. You can customize your Odoo application and quickly add or modify features directly through the user interface. You can use it to make small changes, such as creating an application with your own menus, views, and underlying data models.

**Note**: Developers expose a lot of internal configuration of Odoo applications, which can be modified. But with great power comes great responsibility, so make changes with caution. Please keep a copy of the database in the production system to make these changes. If problems occur, there is a chance that upgrading the affected application (or **base** module) will solve the problem, but it is not 100% guaranteed.

This kind of custom development through developer tools has its limitations compared to the programming tools discussed in subsequent chapters, such as it cannot add or extend the default ORM methods.

Custom development done with the help of developer mode (applied through Odoo Studio) is not easy to integrate into structured development flows, such as version control, automated and quality testing, and workflows for staging and production environments.

In this article, we mainly use the developer mode to introduce how application configuration data is organized in the Odoo framework, and how to complete simple customization or prototype solutions in the developer mode.

### Enable developer mode

Starting from Odoo 13, developer mode can be enabled through **Settings** > **General Settings** page. Near the bottom you will find a **Developer Tools** section. Here you can find the **Activate the developer mode** link. Clicking on this link will enable the developer mode feature in the current browser window:

[![Figure 1.3 – Developer Tools Options in Settings Page](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be71526b637d4428bf9b8df72eeb8116~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022609295748.jpg)

Figure 1.3 – Developer Tools options in the Settings page

Note that the **General Settings** menu will only appear after you have installed at least one app. If you cannot find the menu, please install an app, such as *Contacts* or *CRM*.

Changes in Odoo 13: In Odoo 10 to 12, the developer mode was enabled in the lower right corner of the **Settings** > **Dashboard** page. In Odoo 9 and earlier, the developer mode was activated in the **About** dialog window in the **User** menu in the upper right corner of the web page.

After enabling developer mode, the following menu will appear:

- In the menu bar, a small bug icon of developer tools will be added to the left of the chat and activity icons in the upper right corner.
- In the **Settings** app, **Technical** and **Translations** menu items will appear in the top bar.

[![Figure 1.4 – Settings page after developer mode is turned on](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86d94f4a2eb84c9bad590b0f79193474~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022609394631.jpg)

Figure 1.4 – The settings page after enabling developer mode

After turning on the developer mode, some additional information will appear on the web view. That is, when you hover the mouse over the field, a tooltip will display relevant technical information.

**Note:** We can also enter developer mode by modifying the current URL, so there is no need to enter the Settings page. Just change the .../web#... in the link to .../web?debug=1#... For example, change http:///localhost:8069/web#home to http://localhost_8069/web?debug#home.

### Using developer mode with resources

In order to load faster, web clients minimize and compress **JavaScript** and **CSS** resources. This can make debugging difficult.

The Activate the developer mode (with assets) option will prevent this minification and make each asset load separately. This is useful for debugging in a web client, but will also slow down page browsing due to the overhead.

**Tip**: Both Firefox and Chrome have plugins that provide a button to easily enable and disable developer mode in Odoo. Search for **Odoo Debug** in the plugin store.

### Talk about Odoo Studio

It is worth mentioning that both Odoo Enterprise and SaaS versions provide the Odoo Studio application, which is an interactive application builder. We will not use it because the examples in this book use the Odoo Community Edition, which does not have this feature.

Odoo Studio provides a user-friendly interface for completing the interactive development functions explained in this chapter and some other functions, such as exporting custom functions to files.

Here we will use the developer mode (sometimes called debug mode) and the Technical menu, both of which are available in all versions of Odoo. Most of the functionality built in Odoo Studio can also be done with these two tools, but they are indeed more difficult for non-developers.

## Add custom fields to the model

Adding custom fields to an existing form is a very simple customization that can be done through the user interface without creating a custom module.

In our to-do list application, we want to select a group of people to work on to-do items together. We can specify this by setting a flag on their partner form. We will do this by adding an Is Work Team? flag to the Contact model.

The Contact model is native to the Odoo core and can be used even without installing any application. But there is no menu option to access it.

If the Contacts app is not in the main menu, please install it. Open the Apps item in the top menu and search for the app to install it.

[![Figure 1.5 – Contacts app in the Apps menu](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83845253c0b84d4e97904e3397299261~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022612525419.jpg)

Figure 1.5 – Adding the Contacts app to the Apps menu

Once the installation is complete, you can find the Contacts item in the top-level menu.

### Add fields to the model

Let's start by adding a custom field to the data model.

Click the **Contacts** application menu item to view the contacts main view. Click the developer tools bug icon and select the **View Fields** option.

> **Changes in ODOO 12**
>
> The **View Fields** option in the developer menu is new in Odoo 12. Fields can be added and edited through the **Settings** >**Technical** >**Database Structure** menu. You can use the **Models** or **Fields** options.

You will now see a list of all existing fields for the current Contact model. Click the Create button in the upper left corner and fill in the following details for the new field:

- **Field Name:** x_is_work_team
- **Field Label:** Is Work Team?
- **Field Type:** boolean

[![Figure 1.6 – Create the Is Work Team? field](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e1e7c28c2584443a9da98367a7d78ba~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022614093739.jpg)

Figure 1.6 – Creating the Is Work Team? field

Field names must start with x_. This is mandatory when creating models and fields through the developer tools (otherwise you will be prompted with "Custom fields must have a name that starts with 'x_' !) when saving. Custom development through plugin modules does not have this restriction.

Click **Save** and the field will be added to the field list. By default, the list view shows 80 records, so you need to click the right button in the upper right corner to browse to the next page to see the new field, or you can edit the number of records next to the arrow.

### Add fields to the form view

Now we have a new field in the Contact model (also called the Partner model, as mentioned earlier). But it is not yet visible in the user interface. We need to give it a view. We will add a contact form view.

Go back to the Contacts list and open the form view, either by selecting an existing contact or clicking the Create button.

Now we need to decide where in the form we want to add this field. For example, we should add it after the Tags tag. This will be the extension point we use.

Hovering the mouse over a field will display its technical information, as shown below:

[![Figure 1.7 – Tags field with technical details](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f27700b37d64bf983c7868280b2df56~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/202202261556289.jpg)

Figure 1.7 – The Tags field with a hint of technical details

Next, we need to find the technical name of the field. We can do this by hovering over the field label. This way we can see that the name of the field is **category_id**.

Now you can expand the form view to add fields. Click the developer tools bug icon and select the **Edit View: Form** option. This will open the container for the form definition.

[![Figure 1.8 – Form View Edit Window](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9cff38fa7354555a7523201a78a0895~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/202202261641419.jpg)

Figure 1.8 – The Form View Editing Window

Under the **Architecture** tab, you can see the XML of the base view. You can edit it directly, but this is not a good idea because the changes will be lost when the module is upgraded. The correct way is to edit it by creating an extension view.

Installing additional models allows you to add more fields and visual elements to the base view. This is done by using extended views and can be viewed under the Inherited Views tab. We will add our extension here for the contact form view.

In the Inherited Views list, click Add a line at the bottom and create an extended view with the following values:

- **View Name:** Add some short description, such as **Contacts Form extensions for To-do App**.
- **Architecture:** This will require an XML snippet that specifies the extension point and the content to be added. Use ` <field name="category_id" position="after"><field name="x_is_work_team"/></field> `.

The expanded view should look like this:

[![Figure 1.9 – Creating an extended view to add the x_is_work_team field](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0685254eb06740619df9f935509ec9ea~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022616451765.jpg)

Figure 1.9 – Creating an extended view to add the `x_is_work_team` field

Now click **Save & Close**. If the XML you filled in is correct, it will be added to the **Inherited Views** list, which will include the extension we added. Click the **Save** button to complete the modification of the form view and close the **Edit Form: View** window by clicking the **x** in the upper right corner.

The changes have been made, but you need to reload the form to see the changes. Reload the page, and you should now see the Is Work Team? field below the Tags field, as shown below:

[![Figure 1.10 – Contact form view with the Is Work Team? field](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14e2c056fd6f4808bfa4b3d5818c28d4~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/202202261656453.jpg)

Figure 1.10 – Contact form view with the Is Work Team? field

This completes the steps for adding custom fields to a form view. A form is just one of these view types. The types of views are discussed in detail in the next section.

### Understanding View Types

We've just worked with one type of view, the form view, but there are other types of views used in user interfaces.

The initial view type for Contacts is Kanban view, which displays a number of fields as data cards. Kanban view can also organize cards into columns. For example, CRM applications are displayed in this initial view, called pipeline view. In Kanban view, the developer menu displays the **Edit View: Kanban** option.

List view (sometimes also called tree view) displays records in a list. In list view, the developer menu displays the Edit View: List option.

Finally, the search view controls the behavior of the search box in the upper right corner of the board view and list view, as well as the buttons below it: **Filters** and **Group By**. When the search box is visible, the developer menu will display an **Edit View: ControlPanelView** option.

View types are not limited to these, there are other types, which we will discuss in [Chapter 10 Odoo 15 Development Background View - Designing the User Interface](https://alanhou.org/odoo15-kanban-qweb/).

You can view all view definitions through the **Settings** > **Technical** > **User Interface** > **Views** menu item.

A more elaborate way is to use **Settings** > **Technical** > **Database Structure** > **Models** to select the desired model ( **res.partner** in this case, also called *Contact*) and open the **Views** tab.

[![Figure 1.11 – Database structure of the Contact model](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2042782a43524e50b902d324b1b12417~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022700545266.jpg)

Figure 1.11 – Database structure of the Contact model

Here, we can see all view definitions for the selected model. You can see the records of different types of views, as well as basic views and their extensions, through the **View Type** column. Modifying or adding a view record will take effect immediately, and you will see the changes the next time you reload the view.

Sorting by view type is helpful to see all extensions of the same view type.

Base views are **Inherited View** fields, some of which are empty. View types are not limited to one base view. For example, the form view of the *Contact* model (**res.partner**) has multiple base views, such as **base.view_partner_form** and **base.view_partner_simple_form**.

Views also have a Sequence field. The base view with the lowest Sequence number is the default view. You'll see this Sequence value when you look at a form view definition. Window actions are used for menu items to specify which base view to use. As we mentioned, if a view is not defined, the one with the lowest sequence number is used.

## Create a new model

Models are the basic components for building applications, including the data structure and storage required. Next, we will add a model for the To-do list application, which has three fields:

- Description text
- Is done? flag
- Work team (i.e. the list of users collaborating with each other in the list)

Model names should be in singular form, so the name of the new model should be *To-do Item*. The technical name of the model must be a valid database object identifier, so we should use letters and underscores and avoid other symbols. Because models created through the Technical menu must have an **x_** prefix, the technical name of this new model is **x_todo_item**.

Enter the model definition page through the menu Settings > Technical > Database Structure > Models.

Click the Create button in the Models list to create a new model:

1. Fill in the basic definition values: enter **To-do Item** in the **Model Description** field and **x_todo_item** in the **Model** field.

1. By default, the model will include the **x_name** field in the field list. This is the title displayed when displaying the record in a list or when other records refer to it. It can be used as the title of the **To-do Item**, so edit and modify the corresponding **Field Label** column (change it to Title).

1. Next, add the Is Done? field. This should be pretty self-explanatory. In the Fields list, click Add a line at the bottom to open a new view form and enter the following values:

    1. **Field Name:** x_is_done
    1. **Field Label:** Is Done?
    1. **Field Type:** boolean

    Then click the **Save & Close** button, and then click **Save** in the model form. \
    [![Figure 1.12 – New Field Form](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/561e37aaa3524c509639c121a7398741~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022701244196.jpg)\
    Figure 1.12 – New Field Form

1. The next **Work Team** field is more challenging. Not only is it a relational field that references a record in the *Contact* (**res.partner**) model, but it is also a multi-valued selection field. \
    Fortunately, Odoo supports many-to-many relationships. This is exactly the case in this example, because each task list can be associated with multiple contacts, and each contact can be associated with multiple task lists. \
    To add the Work Team field in the Fields list, click the Edit button again and then click Add a line to open the Add Field form. Then enter the following values:

    1. **Field Name**: x_work_team_ids
    1. **Field Label**: Work Team
    1. **Field Type**: many2many
    1. **Related Model**: res.partner
    1. **Domain**: [('x_is_work_team', '=', True)]

    Many-to-many fields have some unique basic properties: **Relation Table**, **Column 1** and **Column 2**. These are automatically filled in, and usually the default values ​​are sufficient. These properties will be discussed in detail in [Chapter 6 Odoo 15 Development Model - Structuring Application Data](https://alanhou.org/odoo15-structuring-data/). \
    The **Domain** attribute is optional and defines a filter for the records displayed. We use it to restrict the contacts to those who have checked the **Is Work Team?** flag. Otherwise, all contacts will appear in the selection.

    Domain expressions follow Odoo's unique syntax - an iterable object containing three values, each of which is a filter condition, indicating the field name to be filtered, the filter operator, and the value used for filtering. For a detailed explanation, see [Chapter 7 Odoo 15 Development Record Set - Using Model Data](https://alanhou.org/odoo15-recordsets/).

    > **Tip:** Odoo has an interactive domain filter wizard to help generate scope expressions. Access the Settings > Technical > User Interface > User-defined Filters menu. After selecting the target model in the form, the **Domain** field will show a **+ Add filter** button for adding filter conditions. The text box below will dynamically display the scope expression code.

1. When you are finished, click **Save** in the model form. When you create a new model, some fields are automatically added. The ORM engine adds them to all models, which can be helpful when doing audits:\
    [![Figure 1.13 – Database structure of the To-do list model](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc6bb87ead8d4c90a203e1e864fb6834~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022701454370.jpg)\
    Figure 1.13 – Database structure for the To-do list model\
    Now that the underlying model of the to-do list application is in place, users still can’t access it. To do this, you need to configure access permissions. We’ll learn how in the next section.

## Create menu items and actions

Now that we have a model for storing our to-do list, we want to add it to our user interface. We can implement this by adding a menu item to our UI.

We will create a top-level menu that opens directly to the task list. Some apps (like *Contacts*) do this, while others have a submenu under the top bar.

The menu definitions are located in the **Settings** application, **Technical** > **User Interface** > **Menu Items**:

[![Figure 1.14 – Menu Items option in the Technical menu](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7542e6c0dc4847e8a7bff62bf4ed6abd~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022702351110.jpg)

Figure 1.14 – Menu Items option in the Technical menu

We perform the following steps to create a menu item:

1. Go to the page shown above, click **Create**, and enter the following values:

    1. **Menu**: To-do
    1. **Parent Menu**: Leave it blank
    1. **Action**: Select **ir.actions.act_window**
    1. Enter **To-do Items** in the selection box next to the **Action** field, select **Create and Edit...** in the drop-down list, and the **Create: Action** form pop-up window will open.

1. In the Create: Action form, set the following values:

    1. 1. **Action Name**: To-do Items
        1. **External ID Object**: x_todo_item (technical name of the target model).
        1. At this point, the action definition should look like this:

    [![Figure 1.15 – Create: Action form](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/271616fca602483792cf4fa217235857~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022704064258.jpg)Figure 1.15 – Create: Action form

1. Click **Save** in the **Create: Action** form. Then click **Save** in the **Menu Items** form, and the menu items for the *to-do* list app are almost ready to use.

Menu changes require a full page reload to see them. Most browsers can reload using the *F5* shortcut. But if you refresh the page now, you won't see the **To-do** menu. Why? The reason we can't see the menu yet is that we haven't given the user permission to access it.

Access permissions need to be configured before menu items can be displayed to the user. We'll do that in this chapter, but before that, it's worth discussing window actions in more depth.

#### Understanding Window Actions

In this example, an action is added directly to the top-level menu item without sub-menu items. But the menu can be a tree-like menu item with parent-child relationships. Leaf menu items have an associated action that defines the behavior when selected. The action name is the title used in the presentation view.

There are several types of actions, the most important of which are window, report, and server actions. Window (*window*) actions are the most commonly used and are used to display views in the client. Report (*report*) actions are used to run reports, while server (*server*) actions are used to define automated tasks.

Here we are interested in the window action used to display the view. The *to-do* list menu item we just created uses a window action that was created directly through the **Menu Item** form. We can also view and edit this window action through the **Settings** > **Technical** > **Actions** menu item. In this example, we are interested in the window action menu option.

> **Tip:** In many cases, it is better to use the **Edit Action** option in the Developer Tools menu, which provides a shortcut to edit the action of the current view window.

## Configure access control permissions

Odoo comes with a permission control mechanism, and users can only use authorized functions. This means that the task list model we created is not accessible to users.

> **Changes in Odoo 12\
> The ****admin** user is now subject to permissions like any other user. In previous versions of Odoo, admin was a privileged user that was not subject to permissions. This has changed, and **admin** must be authorized to access model data.

Access rights are defined through user groups. Groups, sometimes called access control lists (ACLs), define permissions for accessing a model. Users belong to groups. Therefore, each user's permissions depend on the groups they belong to.

For this project, we will create a **to-do** group and assign it to users who have access to this functionality.

Additionally, we can define record rules (sometimes called row-level permissions) that restrict which records each user can access.

In this project, the to-do items are private to each user, so users can only access the records they created.

### Security Group

Access control is based on groups. Security groups are used to set permissions on models, controlling the menu items that users in the group can use. To achieve more refined control, we can use record rules to control permissions on specified menu items, views, fields, and even data records, which will be explained in the next section.

The security group can also manage applications. Usually, each application has two groups: the user group (**User**) can perform daily operations, and the administrator group (Manager) can perform all configurations for the application.

Next, we create a new security group for the *to-do* list application.

In the **Settings** top-level menu, navigate to Users & Companies > Groups and create a new record with the following values:

- **Application:** Leave blank
- **Name:** To-do User
- Under the **Inherited** tab: Add a row and select User types / Internal User

The effect is as follows:

[![Figure 1.16 – To-Do User security group](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01737752da9c48dfa2ca6930679faf05~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022704363614.jpg)

Figure 1.16 – To-Do User security group

Our security group inherits the **Internal User** group. Group inheritance means that members of the group are also members of the inherited group, and the permissions granted to all users are accumulated. **Internal User** is the basic permission group, and the security groups usually applied inherit it.

There is no to-do application in the Application drop-down list yet, so we add it directly through the group form. We also, then the members of this group will automatically (recursively) become members of the inherited group to obtain their original permissions.

> **Changes in Odoo 12\
> **Before Odoo 12, the **Internal User** group was called Employee. This is just a cosmetic change, the identifier (XML id) in the code remains the same as in previous versions: base.group_user.

### Security Access Control List

Now we can grant the group To-do User to the specified model.

The easiest way is to use the Access Rights tab in the Groups form. Add a row with the following values:

- **Name:** To-do Item User Access
- **Object:** Select the To-do Item in the list
- Check Read Access, Write Access, Create Access, and Delete Access: Check all these checkboxes to grant the corresponding permissions.

Model permissions can also be managed via the Settings > Technical > Security > Access Rights menu.

We don't need to add permissions to the Contact model separately because our group inherits the **Internal User** group and has already obtained the corresponding permissions.

### Assign security groups to users

Now you can add the admin user to the newly created permission group to test the newly added permission settings:

1. Click Users & Companies > Users in the menu, open the form for the Mitchell Admin user, and click **Edit**.
1. In the Other section under the Access Rights tab, you will find a checkbox called To-do User for adding users to the permission group. Check it and click Save to save the form.

[![Figure 1.17 – Mitchel Admin User Form](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6be8449f548c4301aa8e9536f1f8f9a8~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022705390681.jpg)

Figure 1.17 – Mitchel Admin User Form

If everything is done correctly, we should see the To-do app top-level menu. You may need to reload the browser page to force refresh the menu items.

We haven't created any views for it yet, but the excellent Odoo framework automatically generates some basic views for us:

[![Figure 1.18 – Task List Default Form View](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03e92e48013944a69615ff525c73c1f0~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022705431194.jpg)

Figure 1.18 – Task List Default Form View

### Security Recording Rules

When granting access rights to a model, by default the user can access all its records. But sometimes we want to limit the records that each user can access. This can be achieved through record rules.

Recording rules control read and write operations by defining domain filters on models.

For example, in our to-do list application, task items should be private to each user, and we don't want other users to see their own records. We need to add record rules to filter out the creator's own records, considering the following points:

- The framework automatically adds the create_uid field and stores the user who created the record. So you can use it to know the creator of each record.
- The domain execution context contains a user variable, which contains the current user's browser history. Therefore, we can use the dot operator to access its properties, such as the value of **user.id**.

We can achieve this in a scope expression using:

`[('create_uid', '=', user.id)]`

Access the Record Rules page through Settings > Technical > Security > Record Rules or the View Record Rules option in the developer menu. Once on the page, create a new record rule with the following values:

- **Name:** A descriptive title, such as To-do Own Items
- ****Model**:** Select the model in the drop-down list, here is the To-do Item
- **Access Rights:** The operations granted by the rule, keep all checked here
- **Rule Definition **(Domain Filter)** :** Fill in [('create_uid', '=', user.id)]
- **Groups:** This section contains the applied security groups. Click **Add a line** and select the **To-do User** group

At this point the recording rules are defined as follows:

[![Figure 1.19 – To-do User Own Items Recording Rules](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f0d793305404c9ebb82a2f626ff87ff~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022705565230.jpg)

Figure 1.19 – To-do User Own Items Record Rules

At this point, the recording rules are set. Now you can try to create several tasks using the Admin and Demo users (you need to add the Demo user to the security group in advance). Each user should only be able to see the tasks they created.

### Understanding the Super User Account

Odoo includes a built-in superuser like root, which has special permissions and is not restricted by permission control. It is used for internal operations or actions that need to ignore permission control. This superuser is called **OdooBot** and is automatically created when the database is created. Its ID in the database is 1.

> Changes in Odoo 12
>
> Prior to Odoo 12, the default **admin** user used for system configuration was also a superuser. Therefore, the **admin** user had no permissions by default. This has been changed in Odoo 12. Now, the default **admin** user is a normal user, but by default it is set as the administrator of all Odoo applications.

The superuser has no login password, but can activate the account. When logging in through the **Admin \ Setting** group user, there will be a **Become Superuser** option in the developer menu.

You can also go to superuser mode directly on the login screen. In this case, you need to modify the URL to add **?debug=1** to enable developer mode (such as http://localhost:8069/web/login?debug=1). Then the **Login as superuser** option will appear below the **Login** button.

After enabling the super user, the current user in the upper right corner will be displayed as OdooBot, and the area will become a yellow and black strip to clearly inform the user that the super user is enabled.

> Note:
>
> Superusers should only be used when absolutely necessary. Superusers are not subject to permission control, which can lead to data inconsistency, such as in a multi-company scenario, and should be avoided as much as possible.

[![Super user is enabled](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc223eb6d543474e8153926fb52582f7~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022706144318.jpg)

## Create a view

We have created a *To-do Item* model and made it accessible in the user interface through a menu item. Next we create two basic views for it: a list view and a form view.

List view is the most basic way for users to browse existing records. Sometimes, you can edit records directly in list view, but more often you click on a record to access form view to edit record data.

### Create a list view

We can manage views in Settings > Technical > User Interface > Views. Click the **Create** button on this page and enter the following values:

- **View Name:** To-do List View

- **View Type:** Tree

- **Model:** x_todo_item

- **Architecture**: This tag should contain the XML of the view structure. Use the following XML code:


    ```
    <tree>
      <field name="x_name" />
      <field name="x_is_done" />
    </tree>
    ```

The view definition now looks like this:

[![Figure 1.20 – Task List View Definition](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a0ae51edfcee48be84191132f9cc948c~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022706243536.jpg)

Figure 1.20 – Task List View Definition

The basic structure of a list view is quite simple, it consists of a ` <tree> ` element, inside which there are one or more ` <field> ` elements corresponding to the fields displayed in the view.

There are other interesting operations that can be performed in the list view, which we will discuss in more detail in [Chapter 10 Odoo 15 Development Background View - Designing the User Interface](https://alanhou.org/odoo15-kanban-qweb/).

### Create the form view

Form views can also be created via Settings > Technical > User Interface > Views. Create another view record by clicking **Create** and fill in the following values:

- **View Name:** To-do Form View

- **View Type:** Form

- **Model:** x_todo_item

- **Architecture**: In this tag, enter the following XML code:


    ```
    <form>
      <group>
        <field name="x_name" />
        <field name="x_is_done" />
        <field name="x_work_team_ids"
              widget="many2many_tags"
              context="{'default_x_is_work_team': True}" />
      </group>
    </form>
    ```

> **Note:** If the View Type is not specified, it will be automatically identified through the view definition code.

The root node of the form view structure is the `<form>` element, which contains elements such as `<field>`. Other related elements will be learned in [Chapter 10 Odoo 15 Development Background View - Design User Interface](https://alanhou.org/odoo15-kanban-qweb/). For the **x_work_team_ids** work team field, we used a specified widget **many2many_tags**, which will display related records in the form of button row labels instead of ordinary lists.

You can also see that a context attribute is used in the x_work_team_ids work team field. By default, relationship fields allow us to create new records directly from the relationship. Therefore, users can create new Partner records directly from the Work Team field. Since only contacts marked as Is Work Team? are available, we want to enable that flag for all contacts created by default. This is what the default_x_is_work_team context key does, setting a default value for records created from this field.

Now we have created a new form view. If you now use the **To-Do** menu item to create a new checklist task or open an existing record in the list, you will see the form view you just added.

[![Task list form view](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43691794114d4bca96e6a225a47552df~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022706464554.jpg)

### Create a search view

We can see a search box in the upper left corner of the Odoo view interface. The search box allows us to search in the specified field. Below the search box there are **Filters** and **Group By** buttons, which provide some predefined options.

The search view is a UI element that controls these behaviors. It defines the searches done when typing in the search box and the options within the Filters and Group By buttons.

The view can be edited via the **Edit ControlPanelView** option in the Settings > Technical > User Interface menu or in the Developer Menu starting from Odoo 13, or using **Edit Search View** in earlier versions.

The task list model currently doesn't have a search view defined, so we should create one. Let's add an option to the filter menu to filter out uncompleted lists.

Fill in the following values ​​in the New **View** form and click **Save**:

1. **View Name:** To-do Search View

1. **View Type:** Search

1. **Model:** x_todo_item

1. **Architecture:** Add the following XML code under this tag:


    ```
    <search>
      <filter name="item_not_done"
        string="Not Done"
        domain="[('x_is_done', '=', False)]" />
    </search>
    ```

After that, when you reopen or load the task list view, the **Not Done** option will appear in the list of options in **Filters**.

[![To-do list search view filter](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7260a06dca2f43699b68456b7e041dca~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/2022022707004535.jpg)

### Enable default filters for views

It is a good idea to enable this filter by default and remove it when it is not needed.

When you click the To-do menu item, it runs a window action to open the To-do list view. The context object of the window action can be used to set a default filter, similar to setting a default value for a field.

We use the following steps:

1. Open the To-do menu to enter the task list view
1. Open the developer tools menu and select Edit Action. A window action form will pop up for opening the current view. In the Filters section of the General Settings tab, there is a Context Value and Domain Value field.
1. In the Context Value field, enter {'search_default_item_not_done': True}

The **search_default_** prefix indicates that a specific filter is selected by default, in this case **item_not_done**. Now if you click on the **To-do** menu item, you will see that **Not Done** is enabled by default in the search box, and the user can deselect it freely.

The **Domain Value** field also allows users to set filters for displayed records, but users cannot remove the set filters.

[![The task list is selected by default Not Done](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/00e863db9a7c41c5a981134d81bbc78a~tplv-k3u1fbpfcp-zoom-1.image)](https://i.cdnl.ink/homepage/wp-content/uploads/2022/02/202202270712153.jpg)

## Summary

In this chapter, we not only took an overview of Odoo's components, but also used the developer mode to dive into Odoo's internals to understand how these components work together to create an application.

We also used these tools to create a simple application, including models, views, and corresponding menus. We also learned how to view existing applications through developer tools or quickly customize them directly in the user interface.

In the next chapter we will learn how to install Odoo from source and prepare the development environment for Odoo module development.